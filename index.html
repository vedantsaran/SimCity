<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Colonies</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3a 100%);
            color: white;
            overflow: hidden;
            height: 100vh;
            touch-action: manipulation;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            position: relative;
        }

        .header {
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px;
            backdrop-filter: blur(10px);
            border-bottom: 2px solid #4a9eff;
        }

        .resource {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            font-weight: bold;
            color: #4a9eff;
        }

        .game-area {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: radial-gradient(circle at center, #1a1a3a 0%, #0f0f23 70%);
        }

        .stars {
            position: absolute;
            width: 200%;
            height: 200%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #fff, transparent),
                radial-gradient(2px 2px at 40px 70px, #fff, transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, #fff, transparent),
                radial-gradient(2px 2px at 160px 30px, #fff, transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: twinkle 8s infinite;
            opacity: 0.6;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 0.8; }
        }

        .planet {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            border: 3px solid rgba(255,255,255,0.3);
            box-shadow: 0 0 20px rgba(74, 158, 255, 0.5);
        }

        .planet:hover, .planet:active {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(74, 158, 255, 0.8);
        }

        .planet.owned {
            border-color: #4a9eff;
            box-shadow: 0 0 25px rgba(74, 158, 255, 0.7);
        }

        .planet.unexplored {
            background: radial-gradient(circle, #666 0%, #333 100%);
            color: #ccc;
        }

        .planet.colonized {
            background: radial-gradient(circle, #4a9eff 0%, #2d5aa0 100%);
            color: white;
        }

        .planet.mining {
            background: radial-gradient(circle, #ff6b35 0%, #cc5500 100%);
            color: white;
        }

        .planet.research {
            background: radial-gradient(circle, #9b59b6 0%, #663399 100%);
            color: white;
        }

        .planet.defense {
            background: radial-gradient(circle, #e74c3c 0%, #b33e2f 100%);
            color: white;
        }

        .bottom-panel {
            background: rgba(0, 0, 0, 0.9);
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            backdrop-filter: blur(10px);
            border-top: 2px solid #4a9eff;
            max-height: 40vh;
            overflow-y: auto;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .btn {
            padding: 12px 8px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover:before, .btn:active:before {
            left: 100%;
        }

        .btn-explore {
            background: linear-gradient(135deg, #4a9eff 0%, #357abd 100%);
            color: white;
        }

        .btn-colonize {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
        }

        .btn-upgrade {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .selected-planet {
            background: rgba(74, 158, 255, 0.2);
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 10px;
        }

        .upgrade-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 8px;
            margin-top: 10px;
        }

        .upgrade-btn {
            padding: 8px;
            font-size: 12px;
            border-radius: 6px;
        }

        .info-text {
            font-size: 12px;
            color: #bbb;
            text-align: center;
            margin-top: 5px;
        }

        .achievement {
            background: linear-gradient(135deg, #ffd700 0%, #ffb347 100%);
            color: #333;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            animation: slideIn 0.5s ease, fadeOut 0.5s ease 2.5s forwards;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeOut {
            to { opacity: 0; transform: translateX(100%); }
        }

        @media (max-width: 768px) {
            .header {
                font-size: 12px;
                padding: 8px;
            }
            
            .resource {
                font-size: 12px;
            }
            
            .btn {
                padding: 10px 6px;
                font-size: 12px;
            }
            
            .planet {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <div class="resource">‚ö° Energy: <span id="energy">100</span></div>
            <div class="resource">üî¨ Research: <span id="research">0</span></div>
            <div class="resource">‚õèÔ∏è Materials: <span id="materials">50</span></div>
            <div class="resource">üèõÔ∏è Colonies: <span id="colonies">0</span></div>
            <div class="resource">üìä Level: <span id="level">1</span></div>
        </div>

        <div class="game-area">
            <div class="stars"></div>
            <div id="planets-container"></div>
        </div>

        <div class="bottom-panel">
            <div id="selected-info" class="selected-planet" style="display: none;">
                <div id="planet-name">Select a planet</div>
                <div id="planet-details"></div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-explore" onclick="explorePlanet()">üöÄ Explore</button>
                <button class="btn btn-colonize" onclick="colonizePlanet()">üèóÔ∏è Colonize</button>
                <button class="btn btn-upgrade" onclick="showUpgrades()">‚¨ÜÔ∏è Upgrade</button>
            </div>

            <div id="upgrade-panel" style="display: none;">
                <div class="upgrade-grid">
                    <button class="btn upgrade-btn btn-upgrade" onclick="upgradePlanet('mining')">‚õèÔ∏è Mining</button>
                    <button class="btn upgrade-btn btn-upgrade" onclick="upgradePlanet('research')">üî¨ Research</button>
                    <button class="btn upgrade-btn btn-upgrade" onclick="upgradePlanet('defense')">üõ°Ô∏è Defense</button>
                    <button class="btn upgrade-btn btn-colonize" onclick="upgradePlanet('population')">üë• Population</button>
                </div>
            </div>

            <div class="info-text">
                Tap planets to select ‚Ä¢ Explore to find new worlds ‚Ä¢ Colonize to expand your empire
            </div>
        </div>
    </div>

    <script>
        class Game {
            constructor() {
                this.energy = 100;
                this.research = 0;
                this.materials = 50;
                this.colonies = 0;
                this.level = 1;
                this.planets = [];
                this.selectedPlanet = null;
                this.nextPlanetId = 1;
                this.gameTime = 0;
                this.achievements = [];

                this.initializeGame();
                this.startGameLoop();
            }

            initializeGame() {
                // Create starting planets
                this.generatePlanets(5);
                this.render();
                this.updateUI();
            }

            generatePlanets(count) {
                const container = document.getElementById('planets-container');
                const containerRect = container.getBoundingClientRect();

                for (let i = 0; i < count; i++) {
                    const planet = {
                        id: this.nextPlanetId++,
                        x: Math.random() * (window.innerWidth - 80) + 40,
                        y: Math.random() * (window.innerHeight - 200) + 100,
                        size: 30 + Math.random() * 40,
                        type: 'unexplored',
                        level: 1,
                        name: this.generatePlanetName(),
                        resources: {
                            energy: Math.floor(Math.random() * 20) + 10,
                            materials: Math.floor(Math.random() * 30) + 15,
                            research: Math.floor(Math.random() * 15) + 5
                        },
                        upgrades: {
                            mining: 0,
                            research: 0,
                            defense: 0,
                            population: 0
                        }
                    };
                    this.planets.push(planet);
                }
            }

            generatePlanetName() {
                const prefixes = ['Zeta', 'Alpha', 'Beta', 'Gamma', 'Nova', 'Stellar', 'Cosmic', 'Nebula'];
                const suffixes = ['Prime', 'Minor', 'Major', 'One', 'Two', 'Three', 'IV', 'V'];
                return prefixes[Math.floor(Math.random() * prefixes.length)] + '-' + 
                       suffixes[Math.floor(Math.random() * suffixes.length)];
            }

            render() {
                const container = document.getElementById('planets-container');
                container.innerHTML = '';

                this.planets.forEach(planet => {
                    const planetEl = document.createElement('div');
                    planetEl.className = `planet ${planet.type}`;
                    planetEl.style.left = planet.x + 'px';
                    planetEl.style.top = planet.y + 'px';
                    planetEl.style.width = planet.size + 'px';
                    planetEl.style.height = planet.size + 'px';
                    planetEl.style.fontSize = Math.max(10, planet.size / 4) + 'px';
                    
                    if (planet.type === 'unexplored') {
                        planetEl.textContent = '?';
                    } else {
                        planetEl.textContent = planet.level;
                    }

                    if (this.selectedPlanet && this.selectedPlanet.id === planet.id) {
                        planetEl.classList.add('owned');
                    }

                    planetEl.addEventListener('click', () => this.selectPlanet(planet));
                    container.appendChild(planetEl);
                });
            }

            selectPlanet(planet) {
                this.selectedPlanet = planet;
                this.updateSelectedInfo();
                this.render();
            }

            updateSelectedInfo() {
                const info = document.getElementById('selected-info');
                const name = document.getElementById('planet-name');
                const details = document.getElementById('planet-details');

                if (this.selectedPlanet) {
                    info.style.display = 'block';
                    name.textContent = this.selectedPlanet.name;
                    
                    if (this.selectedPlanet.type === 'unexplored') {
                        details.innerHTML = `
                            <div>Status: Unexplored</div>
                            <div>Exploration Cost: 20 Energy</div>
                        `;
                    } else {
                        details.innerHTML = `
                            <div>Type: ${this.selectedPlanet.type.charAt(0).toUpperCase() + this.selectedPlanet.type.slice(1)}</div>
                            <div>Level: ${this.selectedPlanet.level}</div>
                            <div>‚ö° ${this.selectedPlanet.resources.energy}/turn ‚Ä¢ ‚õèÔ∏è ${this.selectedPlanet.resources.materials}/turn ‚Ä¢ üî¨ ${this.selectedPlanet.resources.research}/turn</div>
                        `;
                    }
                } else {
                    info.style.display = 'none';
                }
            }

            explorePlanet() {
                if (!this.selectedPlanet || this.selectedPlanet.type !== 'unexplored') {
                    this.showMessage('Select an unexplored planet first!');
                    return;
                }

                if (this.energy < 20) {
                    this.showMessage('Not enough energy! Need 20 energy.');
                    return;
                }

                this.energy -= 20;
                this.selectedPlanet.type = 'colonized';
                this.selectedPlanet.level = 1;
                
                this.showMessage(`Discovered ${this.selectedPlanet.name}!`);
                this.checkAchievements();
                this.updateSelectedInfo();
                this.render();
                this.updateUI();
            }

            colonizePlanet() {
                if (!this.selectedPlanet || this.selectedPlanet.type === 'unexplored') {
                    this.showMessage('Explore the planet first!');
                    return;
                }

                if (this.selectedPlanet.type === 'colonized' && this.selectedPlanet.upgrades.population === 0) {
                    if (this.materials < 30) {
                        this.showMessage('Not enough materials! Need 30 materials.');
                        return;
                    }

                    this.materials -= 30;
                    this.colonies++;
                    this.selectedPlanet.upgrades.population = 1;
                    this.showMessage(`Colonized ${this.selectedPlanet.name}!`);
                    this.checkAchievements();
                } else {
                    this.showMessage('Planet already colonized or unavailable!');
                }

                this.updateSelectedInfo();
                this.updateUI();
            }

            showUpgrades() {
                const panel = document.getElementById('upgrade-panel');
                panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            }

            upgradePlanet(type) {
                if (!this.selectedPlanet || this.selectedPlanet.type === 'unexplored') {
                    this.showMessage('Select a discovered planet first!');
                    return;
                }

                const cost = (this.selectedPlanet.upgrades[type] + 1) * 25;
                
                if (this.materials < cost) {
                    this.showMessage(`Not enough materials! Need ${cost} materials.`);
                    return;
                }

                this.materials -= cost;
                this.selectedPlanet.upgrades[type]++;
                this.selectedPlanet.level++;

                // Update planet type based on highest upgrade
                const upgrades = this.selectedPlanet.upgrades;
                if (upgrades.mining > upgrades.research && upgrades.mining > upgrades.defense) {
                    this.selectedPlanet.type = 'mining';
                } else if (upgrades.research >= upgrades.mining && upgrades.research > upgrades.defense) {
                    this.selectedPlanet.type = 'research';
                } else if (upgrades.defense >= upgrades.mining && upgrades.defense >= upgrades.research) {
                    this.selectedPlanet.type = 'defense';
                }

                // Increase resource generation
                this.selectedPlanet.resources.energy += 5;
                this.selectedPlanet.resources.materials += 10;
                this.selectedPlanet.resources.research += 3;

                this.showMessage(`Upgraded ${this.selectedPlanet.name}!`);
                this.checkLevel();
                this.updateSelectedInfo();
                this.render();
                this.updateUI();
            }

            startGameLoop() {
                setInterval(() => {
                    this.gameTime++;
                    
                    // Generate resources from colonized planets
                    this.planets.forEach(planet => {
                        if (planet.type !== 'unexplored' && planet.upgrades.population > 0) {
                            this.energy += planet.resources.energy;
                            this.materials += planet.resources.materials;
                            this.research += planet.resources.research;
                        }
                    });

                    // Randomly generate new planets
                    if (Math.random() < 0.02) {
                        this.generatePlanets(1);
                        this.render();
                    }

                    this.checkLevel();
                    this.updateUI();
                }, 1000);
            }

            checkLevel() {
                const newLevel = Math.floor(this.research / 100) + 1;
                if (newLevel > this.level) {
                    this.level = newLevel;
                    this.showMessage(`Level Up! Reached Level ${this.level}!`);
                    this.checkAchievements();
                }
            }

            checkAchievements() {
                const achievements = [
                    { id: 'first_colony', condition: () => this.colonies >= 1, message: 'üèÜ First Colony!' },
                    { id: 'explorer', condition: () => this.planets.filter(p => p.type !== 'unexplored').length >= 5, message: 'üèÜ Space Explorer!' },
                    { id: 'researcher', condition: () => this.research >= 500, message: 'üèÜ Research Master!' },
                    { id: 'empire_builder', condition: () => this.colonies >= 10, message: 'üèÜ Empire Builder!' },
                    { id: 'level_10', condition: () => this.level >= 10, message: 'üèÜ Advanced Civilization!' }
                ];

                achievements.forEach(achievement => {
                    if (!this.achievements.includes(achievement.id) && achievement.condition()) {
                        this.achievements.push(achievement.id);
                        this.showAchievement(achievement.message);
                    }
                });
            }

            showMessage(message) {
                // Simple alert for mobile compatibility
                const messageEl = document.createElement('div');
                messageEl.textContent = message;
                messageEl.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0,0,0,0.9);
                    color: white;
                    padding: 15px 25px;
                    border-radius: 10px;
                    z-index: 1000;
                    font-weight: bold;
                    border: 2px solid #4a9eff;
                `;
                document.body.appendChild(messageEl);
                setTimeout(() => messageEl.remove(), 2000);
            }

            showAchievement(message) {
                const achievementEl = document.createElement('div');
                achievementEl.className = 'achievement';
                achievementEl.textContent = message;
                document.body.appendChild(achievementEl);
                setTimeout(() => achievementEl.remove(), 3000);
            }

            updateUI() {
                document.getElementById('energy').textContent = Math.floor(this.energy);
                document.getElementById('research').textContent = Math.floor(this.research);
                document.getElementById('materials').textContent = Math.floor(this.materials);
                document.getElementById('colonies').textContent = this.colonies;
                document.getElementById('level').textContent = this.level;
            }
        }

        // Start the game when page loads
        window.addEventListener('load', () => {
            new Game();
        });

        // Prevent zoom on mobile
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        });

        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
